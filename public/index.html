<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALEXATRON AI - Terminal</title>
    <style>
        :root { --primary: #00ff88; --bg: #0b1120; --text: #e2e8f0; }
        body { 
            font-family: 'Courier New', monospace; 
            background: var(--bg); color: var(--text); 
            display: flex; flex-direction: column; align-items: center; 
            justify-content: center; height: 100vh; margin: 0; overflow: hidden;
        }

        /* Orb Animation */
        .orb-container { position: relative; margin-bottom: 30px; }
        .orb { 
            width: 120px; height: 120px; border-radius: 50%; 
            background: radial-gradient(circle, var(--primary) 0%, #064e3b 100%); 
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
            transition: all 0.5s ease;
        }
        .pulse { animation: pulse-animation 2s infinite; }
        @keyframes pulse-animation {
            0% { transform: scale(1); box-shadow: 0 0 20px var(--primary); }
            50% { transform: scale(1.05); box-shadow: 0 0 50px var(--primary); }
            100% { transform: scale(1); box-shadow: 0 0 20px var(--primary); }
        }

        /* Console Style */
        .terminal {
            width: 80%; max-width: 600px; height: 300px;
            background: rgba(15, 23, 42, 0.8); border: 1px solid #1e293b;
            border-radius: 10px; padding: 20px; overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        .log-entry { margin-bottom: 10px; line-height: 1.4; border-left: 3px solid var(--primary); padding-left: 10px; }
        .user-txt { color: #94a3b8; font-size: 0.8rem; }
        .ai-txt { color: var(--primary); font-weight: bold; }
        
        .status-bar { margin-top: 15px; font-size: 0.7rem; color: #64748b; text-transform: uppercase; letter-spacing: 2px; }
    </style>
</head>
<body>

    <div class="status-bar" id="status">System: Standby</div>
    
    <div class="orb-container">
        <div id="orb" class="orb"></div>
    </div>

    <div class="terminal" id="terminal">
        <div class="log-entry">
            <span class="user-txt">[SYSTEM]</span><br>
            <span class="ai-txt">ALEXATRON ONLINE. Waiting for ESP32 connection...</span>
        </div>
    </div>

    <script>
        // Dahil ang communication ay via WebSockets sa server.js, 
        // gagamit tayo ng EventSource o polling para i-update ang UI na ito.
        // Pero para mas simple, gagamit tayo ng standard WebSocket connection din dito sa dashboard.

        const terminal = document.getElementById('terminal');
        const status = document.getElementById('status');
        const orb = document.getElementById('orb');

        function addLog(sender, message) {
            const div = document.createElement('div');
            div.className = 'log-entry';
            div.innerHTML = `<span class="user-txt">[${sender.toUpperCase()}]</span><br><span class="ai-txt">${message}</span>`;
            terminal.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Connect sa WebSocket Server
        const socket = new WebSocket(`ws://${window.location.hostname}:3000`);

        socket.onopen = () => {
            status.innerText = "System: Connected to Server";
            orb.classList.add('pulse');
        };

        socket.onmessage = (event) => {
            // Check kung ang data ay string (Transcription/AI Reply)
            if (typeof event.data === 'string') {
                try {
                    const data = JSON.parse(event.data);
                    if(data.type === 'status') {
                        status.innerText = `System: ${data.msg}`;
                    } else {
                        addLog(data.role || 'AI', data.content);
                    }
                } catch(e) {
                    // Kung hindi JSON, i-log as raw text
                    if(event.data.startsWith('http')) {
                        status.innerText = "System: Playing Audio Output";
                    } else {
                        addLog('Server', event.data);
                    }
                }
            }
        };

        socket.onclose = () => {
            status.innerText = "System: Disconnected";
            orb.classList.remove('pulse');
        };
    </script>
</body>
</html>
